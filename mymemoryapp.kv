# Eigentliches Spiel
<GameScreen>:
    layout: layout
    memory_grid: memory_grid
    scatter: scatter
    bottom_label: bottom_label
    top_label: top_label
    top_layout: top_layout
    scatter_layout: scatter_layout
    bottom_layout: bottom_layout
    game_over_label: game_over_label
    menu_btn: menu_btn
    restart_btn: restart_btn
    FloatLayout:
        id: layout
        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 0.8
            pos_hint: {"x": 0, "y": 0.1}
            id: scatter_layout
            MyScatter:
                id: scatter
                MyMemoryGrid:
                    id: memory_grid
                    cols: 6  # Beispielwert
                    size_hint: 1, 1
                    spacing: 0

        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 0.1  # Oberes BoxLayout (10% des Fensters)
            pos_hint: {'x': 0, "top": 1}
            id: top_layout
            LabelBackgroundColor:
                id: top_label
                font_size: app.large_font
                text: "Standard-Modus"
                size_hint: 1, 1

        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 0.1  # Unteres Layout (10% des Fensters)
            pos_hint: {"x": 0, "bottom": 1}
            id: bottom_layout
            GridLayout:
                cols: 4
                size_hint: 1, 1
                padding: (5, 5, 5, 5)
                spacing: 5
                ButtonBackgroundColor:
                    id: menu_btn
                    text: "Menü"
                    size_hint: 0.25, 1
                    on_press: app.root.current = "main_menu"
                ButtonBackgroundColor:
                    id: restart_btn
                    text: "Neustart"
                    size_hint: 0.25, 1
                    on_press: root.restart_game()
                LabelBackgroundColor:
                    id: bottom_label
                    text: "Nirs zu moche"
                    size_hint: 0.5, 1
        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, 0.2
            pos_hint: {"x": 0, "top": 0.8}
            LabelBackgroundColor:
                id: game_over_label
                text: "Schau mer mal"
                size_hint: 1, 1
                border: True
                border_size: 3
                hide: True
                blend_out: True
# Hauptmenü
<MainMenuScreen>:
    continue_button: continue_button
    standard_button: standard_button
    time_button: time_button
    multiplayer_button: multiplayer_button
    settings_button: settings_button
    exit_button: exit_button
    top_label: top_label
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            text: "Hauptmenü"
            font_size: app.large_font
        ButtonBackgroundColor:
            text: "Spiel fortsetzen"
            background_normal: ""
            disabled: True
            id: continue_button
            on_release:
                app.continue_game()

        ButtonBackgroundColor:
            text: "Standard-Modus"
            id: standard_button
            on_release:
                app.root.current = "standard_mode"

        ButtonBackgroundColor:
            text: "Zeit-Modus"
            id: time_button
            on_release:
                app.root.current = "time_mode"

        ButtonBackgroundColor:
            text: "Multiplayer"
            id: multiplayer_button
            on_release:
                app.root.current = "multiplayer_mode"

        ButtonBackgroundColor:
            text: "Einstellungen"
            id: settings_button
            on_release:
                app.root.current = "settings"

        ButtonBackgroundColor:
            text: "Beenden"
            id: exit_button
            on_release:
                app.exit_app()

# Standard-Modus
<StandardModeScreen>:
    top_label: top_label
    back_button: back_button
    small_button: small_button
    medium_button: medium_button
    large_button: large_button
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Standard-Modus"
        ButtonBackgroundColor:
            text: "Klein"
            id: small_button
            on_release:
                app.start_new_game("small", "standard")
        ButtonBackgroundColor:
            text: "Mittel"
            id:medium_button
            on_release:
                app.start_new_game("medium", "standard")
        ButtonBackgroundColor:
            text: "Groß"
            id: large_button
            on_release:
                app.start_new_game("big", "standard")
        ButtonBackgroundColor:
            text: "Zurück"
            id: back_button
            on_release:
                app.root.current = "main_menu"

# Zeit-Modus
<TimeModeScreen>:
    top_label: top_label
    back_button: back_button
    time_race_btn: time_race_btn
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Zeit-Modi"
        ButtonBackgroundColor:
            id: time_race_btn
            text: "Zeitrennen"
            on_release:
                app.root.current = "time_race"
        ButtonBackgroundColor:
            id:back_button
            text: "Zurück"
            on_release:
                app.root.current = "main_menu"

# Standard-Zeitmodus (Zeit wird gestoppt, welche der Spieler für das Lösen eines Memory-Spiels benötigt)
<TimeRaceScreen>:
    top_label: top_label
    back_button: back_button
    small_button: small_button
    medium_button: medium_button
    large_button: large_button
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Zeitrennen"
        ButtonBackgroundColor:
            id: small_button
            text: "Klein"
            on_release:
                app.start_new_game("small", "time_race")
        ButtonBackgroundColor:
            id: medium_button
            text: "Mittel"
            on_release:
                app.start_new_game("medium", "time_race")
        ButtonBackgroundColor:
            id: large_button
            text: "Groß"
            on_release:
                app.start_new_game("big", "time_race")
        ButtonBackgroundColor:
            id: back_button
            text: "Zurück"
            on_release:
                app.root.current = "time_mode"

<MultiplayerScreen>:
    top_label: top_label
    back_button: back_button
    duell_btn: duell_btn
    battle_btn: battle_btn
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Multiplayer"
        ButtonBackgroundColor:
            id: duell_btn
            text: "Duell gegen Spieler"
            on_release:
                app.root.current = "duell_mode"
        ButtonBackgroundColor:
            id: battle_btn
            text: "Kampf gegen AI"
            on_release:
                app.root.current = "battle_mode"
        ButtonBackgroundColor:
            id: back_button
            text: "Zurück"
            on_release:
                app.root.current = "main_menu"

<DuellModeScreen>:
    top_label: top_label
    back_button: back_button
    small_button: small_button
    medium_button: medium_button
    large_button: large_button
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Duell-Modus"
        ButtonBackgroundColor:
            id: small_button
            text: "Klein"
            on_release:
                # app.start_new_game("small", "duell_standard")
                root.board_size = "small"
                root.init_new_game("duell_standard")
        ButtonBackgroundColor:
            id: medium_button
            text: "Mittel"
            on_release:
                # app.start_new_game("medium", "duell_standard")
                root.board_size = "medium"
                root.init_new_game("duell_standard")
        ButtonBackgroundColor:
            id: large_button
            text: "Groß"
            on_release:
                # app.start_new_game("big", "duell_standard")
                root.board_size = "big"
                root.init_new_game("duell_standard")
        ButtonBackgroundColor:
            id: back_button
            text: "Zurück"
            on_release:
                app.root.current = "multiplayer_mode"

# Kampf-Modus
<BattleModeScreen>:
    top_label: top_label
    back_button: back_button
    easy_btn: easy_btn
    medium_btn: medium_btn
    hard_btn: hard_btn
    impossible_btn: impossible_btn
    small_button: small_button
    medium_button: medium_button
    large_button: large_button
    start_btn: start_btn
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Kampf-Modus"
        ################ Schwierigkeitsgrad der KI ######################################
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            rows: 1
            ButtonBackgroundColor:
                text: "Leicht"
                id: easy_btn
                on_release:
                    root.update_diff_buttons(1)
            ButtonBackgroundColor:
                text: "Mittel"
                id: medium_btn
                on_release:
                    root.update_diff_buttons(2)
            ButtonBackgroundColor:
                text: "Schwer"
                id: hard_btn
                on_release:
                    root.update_diff_buttons(3)
            ButtonBackgroundColor:
                text: "Unmöglich"
                id: impossible_btn
                on_release:
                    root.update_diff_buttons(4)
        ################ Spielfeldgröße ######################################
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            ButtonBackgroundColor:
                text: "Klein"
                id: small_button
                on_release:
                    root.update_board_size_buttons(1)
            ButtonBackgroundColor:
                text: "Mittel"
                id: medium_button
                on_release:
                    root.update_board_size_buttons(2)
            ButtonBackgroundColor:
                text: "Groß"
                id: large_button
                on_release:
                    root.update_board_size_buttons(3)

        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            ButtonBackgroundColor:
                id: back_button
                text: "Zurück"
                on_release:
                    app.root.current = "multiplayer_mode"
            ButtonBackgroundColor:
                id: start_btn
                text: "Spiel starten"
                on_release:
                    root.init_new_game("battle")

# Einstellungen
<SettingsScreen>:
    top_label: top_label
    theme_label: theme_label
    light_theme_button: light_theme_button
    dark_theme_button: dark_theme_button
    system_theme_button: system_theme_button
    color_theme_button: color_theme_button
    game_over_animation_label: game_over_animation_label
    no_game_over_animation_button: no_game_over_animation_button
    free_fall_game_over_animation_button: free_fall_game_over_animation_button
    bye_bye_game_over_animation_button: bye_bye_game_over_animation_button
    hello_there_game_over_animation_button: hello_there_game_over_animation_button
    touch_delay_label: touch_delay_label
    ai_timeout_label: ai_timeout_label
    hide_cards_timeout_label: hide_cards_timeout_label
    card_flip_animation_label: card_flip_animation_label
    card_flip_animation_flip_button: card_flip_animation_flip_button
    card_flip_animation_zoom_button: card_flip_animation_zoom_button
    lang_label: lang_label
    lang_btn_en: lang_btn_en
    lang_btn_de: lang_btn_de
    back_button: back_button
    pic_select_btn: pic_select_btn
    reset_btn: reset_btn
    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 5
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Einstellungen"
        ButtonBackgroundColor:
            id: pic_select_btn
            text: "Bilder wählen"
            on_release:
                app.root.current = "pics_select"
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Language"
                id: lang_label
                size_hint: 0.2, 1
            ButtonBackgroundColor:
                text: "English"
                id: lang_btn_en
                size_hint: 0.2, 1
                on_release:
                    root.update_lang_buttons(0)
            ButtonBackgroundColor:
                text: "Deutsch"
                id: lang_btn_de
                size_hint: 0.2, 1
                on_release:
                    root.update_lang_buttons(1)
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Theme"
                id: theme_label
                size_hint: 0.2, 1
            ButtonBackgroundColor:
                text: "Light"
                id: light_theme_button
                size_hint: 0.2, 1
                on_release:
                    root.update_theme_buttons(0)
            ButtonBackgroundColor:
                text: "Dark"
                id: dark_theme_button
                size_hint: 0.2, 1
                on_release:
                    root.update_theme_buttons(1)
            ButtonBackgroundColor:
                text: "System"
                id: system_theme_button
                size_hint: 0.2, 1
                on_release:
                    root.update_theme_buttons(2)
            ButtonBackgroundColor:
                text: "Color"
                id: color_theme_button
                size_hint: 0.2, 1
                on_release:
                    root.update_theme_buttons(3)
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Animation von Karten: "
                id: card_flip_animation_label
                size_hint: 0.2, 1
            ButtonBackgroundColor:
                text: "Flip-Effekt"
                size_hint: 0.2, 1
                id: card_flip_animation_flip_button
                on_release:
                    root.update_card_flip_animation_buttons(0)
            ButtonBackgroundColor:
                text: "Zoom-Effekt"
                size_hint: 0.2, 1
                id: card_flip_animation_zoom_button
                on_release:
                    root.update_card_flip_animation_buttons(1)
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Animation am Spielende: "
                id: game_over_animation_label
                size_hint: 0.2, 1
            ButtonBackgroundColor:
                text: "Keine Animation"
                size_hint: 0.2, 1
                id: no_game_over_animation_button
                on_release:
                    root.update_game_over_animation_buttons(0)
            ButtonBackgroundColor:
                text: "Freier Fall"
                size_hint: 0.2, 1
                id: free_fall_game_over_animation_button
                on_release:
                    root.update_game_over_animation_buttons(1)
            ButtonBackgroundColor:
                text: "...und Tschüss"
                size_hint: 0.2, 1
                id: bye_bye_game_over_animation_button
                on_release:
                    root.update_game_over_animation_buttons(2)
            ButtonBackgroundColor:
                text: "Na, du?!"
                size_hint: 0.2, 1
                id: hello_there_game_over_animation_button
                on_release:
                    root.update_game_over_animation_buttons(3)
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Touch-Delay: 10 (Standard = 10)\nSensitivität der 'Touch-Erkennung'"
                id: touch_delay_label
                size_hint: 0.8, 1
            ButtonBackgroundColor:
                text: "+"
                size_hint: 0.1, 1
                on_release:
                    root.increase_touch_delay()
                    root.change_touch_delay_label_text()
            ButtonBackgroundColor:
                text: "-"
                size_hint: 0.1, 1
                on_release:
                    root.decrease_touch_delay()
                    root.change_touch_delay_label_text()
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "AI Timeout: 1.0 (Standard = 1.0)"
                id: ai_timeout_label
                size_hint: 0.8, 1
            ButtonBackgroundColor:
                text: "+"
                size_hint: 0.1, 1
                on_release:
                    root.increase_ai_timeout()
                    root.change_ai_timeout_label_text()
            ButtonBackgroundColor:
                text: "-"
                size_hint: 0.1, 1
                on_release:
                    root.decrease_ai_timeout()
                    root.change_ai_timeout_label_text()
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            LabelBackgroundColor:
                text: "Karten verdecken: 0.8 (Standard = 0.8)"
                id: hide_cards_timeout_label
                size_hint: 0.8, 1
            ButtonBackgroundColor:
                text: "+"
                size_hint: 0.1, 1
                on_release:
                    root.increase_hide_cards_timeout()
                    root.change_hide_cards_timeout_label_text()
            ButtonBackgroundColor:
                text: "-"
                size_hint: 0.1, 1
                on_release:
                    root.decrease_hide_cards_timeout()
                    root.change_hide_cards_timeout_label_text()
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            ButtonBackgroundColor:
                id: back_button
                text: "Zurück"
                on_release:
                    app.root.current = "main_menu"
            ButtonBackgroundColor:
                id: reset_btn
                text: "Reset"
                size_hint: 0.2, 1.0
                on_release:
                    root.reset_settings()

# Auswahlbildschirm für Bilder
<PicsSelectScreen>:
    top_label: top_label
    back_button: back_button
    akira_label: akira_label
    akira_box: akira_box
    cars_label: cars_label
    cars_box: cars_box
    sport_label: sport_label
    sport_box: sport_box
    own_landscapes_label: own_landscapes_label
    own_landscapes_box: own_landscapes_box
    sexy_label: sexy_label
    sexy_box: sexy_box
    random_label: random_label
    random_box: random_box
    nature_label: nature_label
    nature_box: nature_box
    reset_btn: reset_btn

    BoxLayout:
        orientation: "vertical"
        padding: (5, 5, 5, 5)
        spacing: 1
        LabelBackgroundColor:
            id: top_label
            font_size: app.large_font
            text: "Auswahl der Bilder"
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: akira_label
                text: "Akira"
                size_hint: 0.8, 1
            CheckBox:
                id: akira_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: cars_label
                text: "Autos"
                size_hint: 0.8, 1
            CheckBox:
                id: cars_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: sport_label
                text: "Sport"
                size_hint: 0.8, 1
            CheckBox:
                id: sport_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: own_landscapes_label
                text: "Landschaften von mir"
                size_hint: 0.8, 1
            CheckBox:
                id: own_landscapes_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: sexy_label
                text: "Sexy"
                size_hint: 0.8, 1
            CheckBox:
                id: sexy_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: random_label
                text: "Verschiedenes"
                size_hint: 0.8, 1
            CheckBox:
                id: random_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            size_hint: 0.7, 1
            spacing: 1
            LabelBackgroundColor:
                id: nature_label
                text: "Naturfotos"
                size_hint: 0.8, 1
            CheckBox:
                id: nature_box
                size_hint: 0.2, 1
                background_normal: ""
                background_checkbox_normal: "gfx/misc/checkbox_unchecked_color.png"
                background_checkbox_down: "gfx/misc/checkbox_checked_color.png"
                on_release:
                    root.save_pics_lists_screen()
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 5
            ButtonBackgroundColor:
                id: back_button
                text: "Zurück"
                on_release:
                    app.root.current = "settings"
            ButtonBackgroundColor:
                id: reset_btn
                text: "Reset"
                size_hint: 0.2, 1.0
                on_release:
                    root.reset_checkboxes()

# Bildschirm zur Auswahl des 'Beginners'
<WhoStartsScreen>:
    top_label: top_label
    back_button: back_button
    head_button: head_button
    tail_button: tail_button
    coin: coin

    FloatLayout:
        LabelBackgroundColor:
            font_size: app.large_font
            text: "Wer beginnt? Wähle 'Kopf' oder 'Zahl'."
            id: top_label
            pos_hint: {"x": 0, "top": 1}
            size_hint: 1, 0.2
        BoxLayout:
            orientation: "horizontal"
            padding: (5, 5, 5, 5)
            spacing: 1
            pos_hint: {"x": 0, "top": 0.8}
            size_hint: 1, 0.2
            ButtonBackgroundColor:
                text: "Kopf"
                id: head_button
                on_release:
                    root.coin.start_flip("head")
            ButtonBackgroundColor:
                text: "Zahl"
                id: tail_button
                on_release:
                    root.coin.start_flip("tail")
        Coin:
            id: coin
        ButtonBackgroundColor:
            id: back_button
            text: "Zurück"
            pos_hint: {"x": 0, "top": 0.2}
            size_hint: 1, 0.2
            on_release:
                app.root.current = "main_menu"
